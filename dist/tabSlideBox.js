"use strict";function SimplePubSub(){var e={};return{on:function(t,n){return t.split(" ").forEach(function(t){e[t]||(e[t]=[]),e[t].push(n)}),this},trigger:function(t,n){return angular.forEach(e[t],function(e){e.call(null,n)}),this}}}angular.module("tabSlideBox",[]).directive("onFinishRender",function(e){return{restrict:"A",link:function(t,n,i){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}}).directive("tabSlideBox",["$timeout","$window","$ionicSlideBoxDelegate","$ionicScrollDelegate",function($timeout,$window,$ionicSlideBoxDelegate,$ionicScrollDelegate){return{restrict:"A, E, C",link:function(e,t,n,i){function o(){var e=angular.element(l.querySelector(".tsb-icons")),t=e.find("a"),i=e[0].querySelector(".tsb-ic-wrp"),o=t.length;i.querySelector(".scroll");angular.forEach(t,function(e,t){var n=angular.element(e);n.on("click",function(){u.slide(t)}),n.attr("icon-off")&&n.attr("class",n.attr("icon-off"))});var r=n.tab;("undefined"==typeof n.tab||r>=o||0>r)&&(r=Math.floor(t.length/2)),0==r&&a(0),$timeout(function(){u.slide(r)},0)}function a(e){var t=angular.element(l.querySelector(".tsb-icons")),n=t.find("a"),i=t[0].querySelector(".tsb-ic-wrp"),o=(n.length,i.querySelector(".scroll")),a=t[0].offsetWidth/2,c=angular.element(n[e]),s=angular.element(t[0].querySelector(".active"));if(c&&c.length){var u=c[0].offsetWidth,f=c[0].offsetLeft;s.attr("icon-off")?s.attr("class",s.attr("icon-off")):s.removeClass("active"),c.attr("icon-on")&&c.attr("class",c.attr("icon-on")),c.addClass("active");var g=a-f-u/2+5;if(o){var v=i.offsetWidth,$=Math.abs(r(o.style.webkitTransform)),h=100,b=40;(f+u+b>$+v||$>f-h)&&(g>0&&(g=0),d.scrollTo(Math.abs(g),0,!0))}else{var g=a-f-u/2+5+"px";i.style.webkitTransform="translate3d("+g+",0,0)"}}}function r(e){return e=e.replace("translate3d(",""),e=e.replace("translate(",""),parseInt(e)}var l=t[0],c=t;c.addClass("tabbed-slidebox"),"bottom"===n.tabsPosition&&c.addClass("btm");var s=l.querySelector(".slider").getAttribute("delegate-handle"),u=$ionicSlideBoxDelegate;s&&(u=u.$getByHandle(s));var d=$ionicScrollDelegate;s&&(d=d.$getByHandle(s));var f=e.events;f.on("slideChange",function(e){a(e.index)}),f.on("ngRepeatFinished",function(e){o()}),o()},controller:function($scope,$attrs,$element){$scope.events=new SimplePubSub,$scope.slideHasChanged=function(index){$scope.events.trigger("slideChange",{index:index}),$timeout(function(){$scope.onSlideMove&&$scope.onSlideMove({index:eval(index)})},100)},$scope.$on("ngRepeatFinished",function(e){$scope.events.trigger("ngRepeatFinished",{event:e})})}}}]);